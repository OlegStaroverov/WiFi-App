<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wi-Fi –°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å</title>
    <script src="https://st.max.ru/js/max-web-app.js"></script>
    <script src="https://api-maps.yandex.ru/3.0/?apikey=ecac47f2-9ce4-4e1f-9eea-980f1b1c8292&lang=ru_RU"></script>
    <script>
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç
    window.checkYmapsLoaded = function() {
        if (typeof ymaps3 === 'undefined') {
            console.error('‚ùå –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å');
            // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            setTimeout(() => {
                const mapContainer = document.getElementById('yandexMap');
                if (mapContainer) {
                    mapContainer.innerHTML = `
                        <div style="height: 100%; display: flex; align-items: center; justify-content: center; color: #666;">
                            <div style="text-align: center;">
                                <div style="font-size: 48px;">üó∫Ô∏è</div>
                                <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API-–∫–ª—é—á –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç</p>
                            </div>
                        </div>
                    `;
                }
            }, 1000);
        } else {
            console.log('‚úÖ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã API –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
        }
    };

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
    setTimeout(window.checkYmapsLoaded, 1000);
    </script>

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- –®–∞–ø–∫–∞ -->
        <header class="header">
            <h1>üó∫Ô∏è Wi-Fi –°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å</h1>
            <div class="user-info" id="userInfo">
                <span>–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
        </header>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="tabs">
            <button class="tab-btn active" data-tab="map">üó∫Ô∏è –ö–∞—Ä—Ç–∞</button>
            <button class="tab-btn" data-tab="list">üìã –°–ø–∏—Å–æ–∫</button>
            <button class="tab-btn" data-tab="report">üîß –û–±—Ä–∞—â–µ–Ω–∏—è</button>
            <button class="tab-btn" data-tab="admin" id="adminTab" style="display: none;">üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <!-- –≠–∫—Ä–∞–Ω –∫–∞—Ä—Ç—ã -->
            <div id="map-screen" class="screen active">
                <div class="card">
                    <h3>üìç –ù–∞–π—Ç–∏ –±–ª–∏–∂–∞–π—à–∏–π Wi-Fi</h3>
                    <button onclick="findNearestPoints()" class="btn primary" id="findBtn">
                        üìç –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
                    </button>
                    <div id="nearestResults" class="results"></div>
                </div>
                
                <div class="card">
                    <h3>üó∫Ô∏è –ö–∞—Ä—Ç–∞ —Ç–æ—á–µ–∫ Wi-Fi</h3>
                    <div id="yandexMap" class="map-container"></div>
                </div>
            </div>

            <!-- –≠–∫—Ä–∞–Ω —Å–ø–∏—Å–∫–∞ -->
            <div id="list-screen" class="screen">
                <div class="filters">
                    <button class="filter-btn active" onclick="filterPoints('all')">üìã –í—Å–µ</button>
                    <button class="filter-btn" onclick="filterPoints('–∑–¥—Ä–∞–≤')">‚öïÔ∏è –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</button>
                    <button class="filter-btn" onclick="filterPoints('–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ')">üéí –®–∫–æ–ª—ã, –í–£–ó—ã, —é–Ω–æ—à–µ—Å–∫–∏–µ –∫–ª—É–±—ã</button>
                    <button class="filter-btn" onclick="filterPoints('—Ç—Ü')">üõí –¢–æ—Ä–≥–æ–≤—ã–µ —Ü–µ–Ω—Ç—Ä—ã, —Ä—ã–Ω–∫–∏, –º–∞–≥–∞–∑–∏–Ω—ã</button>
                    <button class="filter-btn" onclick="filterPoints('–æ—Ç–¥—ã—Ö')">üå≥ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è, –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</button>
                    <button class="filter-btn" onclick="filterPoints('–ø–∞—Ä–∫–∏ –∏ —Å–∫–≤–µ—Ä—ã')">üå≥ –ü–∞—Ä–∫–∏ –∏ —Å–∫–≤–µ—Ä—ã</button>
                    <button class="filter-btn" onclick="filterPoints('—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç')">üöå –û—Å—Ç–∞–Ω–æ–≤–∫–∏</button>
                    <button class="filter-btn" onclick="filterPoints('–ú–§–¶')">üè¢ –ú–§–¶</button>
                    <button class="filter-btn" onclick="filterPoints('–ê–ó–°')">‚õΩ –ê–ó–°</button>
                    <button class="filter-btn" onclick="filterPoints('—Å–ø–æ—Ä—Ç')">‚öΩ –°–ø–æ—Ä—Ç</button>
                    <button class="filter-btn" onclick="filterPoints('–≥–æ—Å—Ç–∏–Ω–∏—Ü–∞')">üè® –ì–æ—Å—Ç–∏–Ω–∏—Ü—ã</button>
                    <button class="filter-btn" onclick="filterPoints('—Ç—É—Ä–±–∞–∑–∞')">‚õ∫ –¢—É—Ä–±–∞–∑—ã</button>
                    <button class="filter-btn" onclick="filterPoints('–ø–ª—è–∂')">üèñÔ∏è –ü–ª—è–∂–∏</button>
                    <button class="filter-btn" onclick="filterPoints('–¥–æ–º–∞')">üèòÔ∏è –ñ–∏–ª—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã</button>
                    <button class="filter-btn" onclick="filterPoints('–∫–∞—Ñ–µ')">‚òï –ö–∞—Ñ–µ</button>
                    <button class="filter-btn" onclick="filterPoints('')">üìç –î—Ä—É–≥–æ–µ</button>
                </div>
                <div id="points-list" class="points-list"></div>
            </div>

            <!-- –≠–∫—Ä–∞–Ω –æ–±—Ä–∞—â–µ–Ω–∏–π -->
            <div id="report-screen" class="screen">
                <div class="card">
                    <h3>üîß –°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ</h3>
                    <div class="form-group">
                        <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—á–∫—É Wi-Fi:</label>
                        <input type="text" id="problemPointSearch" class="form-input" 
                               placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ—á–∫–∏..." 
                               oninput="app.searchPoints(this.value)">
                        <select id="problemPoint" class="form-input" style="margin-top: 8px; display: none;">
                            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—á–∫—É --</option>
                        </select>
                        <div id="searchResults" class="search-results"></div>
                    </div>
                    <div class="form-group">
                        <label>–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:</label>
                        <textarea id="problemDesc" class="form-input" rows="4" 
                                  placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–æ..."></textarea>
                    </div>
                    <button onclick="submitProblem()" class="btn primary">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                </div>

                <div class="card">
                    <h3>üìç –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ—é —Ç–æ—á–∫—É Wi-Fi</h3>
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è/–º–µ—Å—Ç–∞:</label>
                        <input type="text" id="newPointName" class="form-input" 
                               placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–∞—Ñ–µ '–£ –º–æ—Ä—è', –¢–¶ '–í–µ—Å–Ω–∞'">
                    </div>
                    <div class="form-group">
                        <label>–ê–¥—Ä–µ—Å:</label>
                        <input type="text" id="newPointAddress" class="form-input" 
                               placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —É–ª. –õ–µ–Ω–∏–Ω–∞, 10">
                    </div>
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ –∏ —É—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç—É–ø–∞:</label>
                        <textarea id="newPointReason" class="form-input" rows="3"
                                  placeholder="–û–ø–∏—à–∏—Ç–µ —É—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ Wi-Fi (–ø–∞—Ä–æ–ª—å, –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)..."></textarea>
                    </div>
                    <button onclick="submitSuggestion()" class="btn secondary">üí° –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</button>
                </div>

                <div class="card">
                    <h3>üìã –ú–æ–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è</h3>
                    <div id="my-requests" class="requests-list"></div>
                </div>
            </div>

            <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
            <div id="admin-screen" class="screen">
                <div class="card admin-header">
                    <h3>üëë –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                    <div class="admin-stats">
                        <div class="stat">
                            <span class="stat-number" id="totalRequests">0</span>
                            <span class="stat-label">–í—Å–µ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏–π</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="newRequests">0</span>
                            <span class="stat-label">–ù–æ–≤—ã—Ö</span>
                        </div>
                    </div>
                </div>

                <div class="admin-content">
                    <div class="requests-column">
                        <h4>üì® –û–±—Ä–∞—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h4>
                        <div id="admin-requests" class="admin-requests-list"></div>
                    </div>
                    
                    <div class="details-column">
                        <div id="request-details" class="request-details">
                            <div class="placeholder">
                                <p>–í—ã–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π –∏ –æ—Ç–≤–µ—Ç–∞</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π —Ç–æ—á–∫–∏ -->
    <div id="pointModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="pointDetails"></div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
